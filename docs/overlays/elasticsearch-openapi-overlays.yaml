# Overlays that are specific to the Elasticsearch OpenAPI document
overlay: 1.0.0
info:
  title: Overlays for the Elasticsearch OpenAPI document
  version: 0.0.1
actions:
  - target: '$.info'
    description: Add a document description and feedback link
    update:
      title: Elasticsearch API
      description: >
        ## Documentation source and versions
        
        This documentation is derived from the `main` branch of the [elasticsearch-specification](https://github.com/elastic/elasticsearch-specification) repository.
        It is provided under license [Attribution-NonCommercial-NoDerivatives 4.0 International](https://creativecommons.org/licenses/by-nc-nd/4.0/).
      x-doc-license:
        name: Attribution-NonCommercial-NoDerivatives 4.0 International
        url: 'https://creativecommons.org/licenses/by-nc-nd/4.0/'
      x-feedbackLink:
        label: Feedback
        url: https://github.com/elastic/docs-content/issues/new?assignees=&labels=feedback%2Ccommunity&projects=&template=api-feedback.yaml&title=%5BFeedback%5D%3A+
# Examples that apply only to the Elasticsearch OpenAPI document
  - target: "$.paths['/_features']['get']"
    description: "Add examples for get features operation"
    update:
      responses:
        200:
          content:
            application/json:
              examples:
                getFeaturesResponseExample1:
                  $ref: "../../specification/features/get_features/FeaturesApiResponseExample1.json"
  - target: "$.paths['/_features/_reset']['post']"
    description: "Add examples for reset features operation"
    update:
      responses:
        200:
          content:
            application/json:
              examples:
                resetFeaturesResponseExample1:
                  $ref: "../../specification/features/reset_features/ResetFeaturesResponseExample1.json"
 # Remove and annotate items that are not shown in Bump.sh due to depth limits  
  - target: "$.components['schemas']['ml._types:Datafeed'].properties.query"
    remove: true
  - target: "$.components['schemas']['ml._types:Datafeed'].properties"
    description: Re-add a simplified query object
    update:
      query:
        x-abbreviated: true
        type: object
        description: >
          The Elasticsearch query domain-specific language (DSL).
          This value corresponds to the query object in an Elasticsearch search POST body.
          All the options that are supported by Elasticsearch can be used, as this object is passed verbatim to Elasticsearch.
          By default, this property has the following value: `{"match_all": {"boost": 1}}`.
        externalDocs:
          url: https://www.elastic.co/guide/en/elasticsearch/reference/current/query-dsl.html
          description: Query DSL
  - target: "$.components['schemas']['ml._types:CategorizationAnalyzerDefinition'].properties.tokenizer"
    description: Remove tokenizer object from ML anomaly detection analysis config
    remove: true
  - target: "$.components['schemas']['ml._types:CategorizationAnalyzerDefinition'].properties"
    description: Re-add a simplified tokenizer object in ML anomaly detection analysis config
    update:
      tokenizer:
        x-abbreviated: true
        oneOf:
          - type: object
          - type: string
        description: >
          The name or definition of the tokenizer to use after character filters are applied.
          This property is compulsory if `categorization_analyzer` is specified as an object.
          Machine learning provides a tokenizer called `ml_standard` that tokenizes in a way that has been determined to produce good categorization results on a variety of log file formats for logs in English.
          If you want to use that tokenizer but change the character or token filters, specify `"tokenizer": "ml_standard"` in your `categorization_analyzer`.
          Additionally, the `ml_classic` tokenizer is available, which tokenizes in the same way as the non-customizable tokenizer in old versions of the product (before 6.2).
          `ml_classic` was the default categorization tokenizer in versions 6.2 to 7.13, so if you need categorization identical to the default for jobs created in these versions, specify `"tokenizer": "ml_classic"` in your `categorization_analyzer`.
        externalDocs:
          url: https://www.elastic.co/guide/en/elasticsearch/reference/current/analysis-tokenizers.html
          description: Tokenizer reference