summary: Custom rerank task (Cohere APIv2)
description: Run `PUT _inference/rerank/custom-rerank` to create an inference endpoint that performs a rerank task.
method_request: 'PUT _inference/rerank/custom-rerank'
# type: "request"
value: |-
  {
    "service": "custom",
    "service_settings": {
        "secret_parameters": {
            "api_key": "<api key>"
        },
        "url": "https://api.cohere.com/v2/rerank",
        "headers": {
            "Authorization": "bearer ${api_key}",
            "Content-Type": "application/json"
        },
        "request": "{\"documents\": ${input}, \"query\": ${query}, \"model\": \"rerank-v3.5\"}",
        "response": {
            "json_parser": {
                "reranked_index":"$.results[*].index",
                "relevance_score":"$.results[*].relevance_score"
            }
        }
    }
  }
